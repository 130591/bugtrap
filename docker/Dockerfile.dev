FROM node:21 as build

LABEL description="bugtrap-app"
LABEL version="1.0.0"

ENV HOME=/usr/src/app

WORKDIR ${HOME}

COPY ./apps/api/ ${HOME}/bugtrap/
WORKDIR ${HOME}/bugtrap

RUN npm install --frozen-lockfile

RUN npm install --save-dev @nestjs/cli

RUN ./node_modules/.bin/nest --version

EXPOSE 3000

CMD ["npm", "run", "start:dev"]
